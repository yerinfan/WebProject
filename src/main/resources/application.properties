# SERVER
server.port=8888

# H2 DATABASE 설정 (file 모드)
#  - DB_CLOSE_DELAY=-1 : JVM 종료 시까지 DB 유지
spring.datasource.url=jdbc:h2:file:./data/demo-db;DB_CLOSE_DELAY=-1
spring.datasource.username=sa
spring.datasource.password=
spring.datasource.driver-class-name=org.h2.Driver

# JPA 설정
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.show-sql=true
# DDL 자동 실행은 끄고
spring.jpa.hibernate.ddl-auto=none
# 스키마·데이터 초기화 전까지 JPA 엔티티 매핑 지연
spring.jpa.defer-datasource-initialization=true

# SQL init: 항상 schema.sql → data.sql 순서로 실행
spring.sql.init.mode=always
spring.sql.init.schema-locations=classpath:/schema.sql
spring.sql.init.data-locations=classpath:/data.sql

# H2 콘솔
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# 세션 쿠키를 cross-origin fetch에서 허용
server.servlet.session.cookie.same-site=none
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.domain=webproject-zty4.onrender.com

# Thymeleaf
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html

# 파일 업로드 경로
file.upload-dir=uploads

# Spring Security 설정
spring.security.user.lives-on-default-properties=true

# 로깅
logging.level.kr.ac.kopo=DEBUG

# CORS 전역 설정
spring.web.cors.allow-credentials=true
spring.web.cors.allowed-origins=https://webproject-zty4.onrender.com
spring.web.cors.allowed-methods=POST,GET,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*

# NAVER API
naver.client-id=WwKDIVdAlu63Ljcj0cE6
naver.client-secret=vu7tyVzVx5
